<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="starbackground" width="1" height="1">

    </canvas>
</body>
<script>
    const canvas = window.document.getElementById("starbackground");
    canvas.width = window.outerWidth;
    canvas.height = window.outerHeight;
    const ctx = canvas.getContext("2d");
    ctx.strokeStyle = "white";
    ctx.fillColor = "white";
    let flakes = [];
    const r = 4;

    function drawFlakes(factorY,factorX){
      ctx.clearRect(0,0,canvas.width,canvas.height)
      ctx.strokeStyle = "white";
      ctx.fillColor = "white";
      flakes.forEach((element)=>{
        ctx.beginPath();
        const x =Math.floor(element[1]+ r*100 *(factorX*0.01));
        const y = Math.floor(element[0]+ r*100 *(factorY*0.01));
        ctx.arc(x,y,Math.floor(Math.random()*50)/25,0,2*Math.PI,false);
        ctx.stroke();
      })
    }
    const pixels = window.outerHeight * window.outerWidth;
    const amountflakes = pixels * 0.00015 * Math.pow(r*2,2);
    function makeStars() {

      for (let i = 0; i < Math.floor(amountflakes);i++) { 
        const randX = Math.floor(Math.random()* window.outerWidth *r*2) - window.outerWidth*r;
        const randY = Math.floor(Math.random()* window.outerHeight *r*2) - window.outerHeight*r;
        const flakeTurple = [randY,randX];
        if (!flakes.includes(flakeTurple)) {
          flakes.push(flakeTurple);
        }
      }
    }
    makeStars();
    drawFlakes(0,0);
    console.log(amountflakes,flakes.length)
    window.addEventListener("mousemove",(event) => {
      const deltaX = event.clientX;
      const deltaY = event.clientY;
      drawFlakes(Math.floor(deltaY),Math.floor(deltaX));
    });
    window.addEventListener("resize", (event)=>{
      canvas.width = window.outerWidth;
      canvas.height = window.outerHeight;
      makeStars();
    })
</script>
<style>
    body {
      overflow: hidden;
      margin: 0;
    }
    canvas{
        background-color: black;
        width: 100vw;
        height: 100vh;
    }
</style>
</html>
